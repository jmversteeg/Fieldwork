!function(a,b,c){var d={active:-1,activeTooltip:-1,container:0,trackInterval:-1,track:function(){var a=this.active;if(a.is(":visible")){var b=a.offset();this.activeTooltip.css({top:b.top+a.outerHeight(),left:b.left+a.outerWidth()/2-this.activeTooltip.outerWidth()/2})}else this.dismiss()},startTrack:function(){this.trackInterval=b.setInterval(function(){d.track()},30),a(c).on({"scroll.jt":function(){d.track()}})},dismiss:function(){-1!==this.trackInterval&&(b.clearInterval(this.trackInterval),this.trackInterval=-1),a(c).off(".jt");var d=this.activeTooltip;d.stop().animate({opacity:0},{duration:200,complete:function(){a(this).remove()}}),this.active=this.activeTooltip=-1},isActive:function(a){return-1!==this.active?this.active[0]===a[0]:!1}};a.fn.jtLink=function(b,c,d){var e=this;e.data("jt",{html:b});for(var f in c)e.on(c[f]+".jt",function(){a(this).jtShow()});for(var f in d)e.on(c[f]+".jt",function(){a(this).jtHide()})},a.fn.jtUnlink=function(){var a=this;a.jtHide(),a.removeData("jt"),a.removeData("jt-tt"),a.off(".jt")},a.fn.jtShow=function(){var b=this;if(!d.isActive(b)){-1!==d.active&&d.dismiss(),d.active=b;var c=a('<div class="jt-wrapper"><div class="jt-arrow"></div><div class="jt-inner">'+b.data("jt").html+"</div></div>").css({opacity:0}).stop().animate({opacity:.95},{duration:200});a("body").append(c);var e=b.offset();c.css({top:e.top+b.outerHeight(),left:e.left+b.outerWidth()/2-c.outerWidth()/2}),d.activeTooltip=c,d.startTrack()}return this},a.fn.jtHide=function(){var a=this;return d.isActive(a)&&d.dismiss(),this}}(jQuery,window,document),function(a,b,c){function d(b,c){this.slug=c.slug,this.submitCallback=c.submitCallback,this.hiddenFieldName=c.hiddenFieldName,this.dataFields=c.dataFields,this.element=b,this.ajaxEnabled=c.ajax.submitEnabled,this.fields=[],this.validators=[];for(var d in c.fields)this.fields.push(new f(this,c.fields[d]));for(var d in c.liveValidators)this.validators.push(new e(this,c.liveValidators[d]));var h=this;""!==c.ajax.method&&(this.ajaxMethod=c.ajax.method,null!==c.ajax.results&&g.performCallback(this.ajaxMethod,g.AJAXCALLBACK,this,c.ajax.results,{type:g.AJAXCALLBACK,instant:!0})),a.fn.inputActionOnEnter&&b.find("[data-input-action-on-enter]").inputActionOnEnter(),b.on({submit:function(a){h.submit(a)}}),g.processForms()}function e(a,b){this.form=a,this.method=b.method,this.error=b.error,this.data=b,this.inflictedFields=b.inflictedFields,this.valid=!1}function f(b,c){this.form=b,this.element=a("#"+c.id),this.touched=!1,this.valid=!1,this.validators=c.validators,this.sanitizers=c.sanitizers,c.hasOwnProperty("dtConfig")&&this.element.datetimepicker(c.dtConfig),this.isButton=c.isButton===!0,this.clicked=!1;var d=this;this.element.on({blur:function(){d.blur()},focus:function(){d.touched=!0,d.element.addClass("input-touched")},click:function(){d.clicked=!0},keyup:function(a){d.keyup(a,this)}}),this.element.is('[type="checkbox"]')&&this.element.on("change",function(){d.blur()})}var g={AJAXCALLBACK:0,SUBMITCALLBACK:1,i:{callbacks:[]},validators:{regex:function(a,b){var c=/\/(.*)\/([a-z]*)/.exec(b.pattern);return a.getValue().match(new RegExp(c[1],c[2]))},checkbox:function(a,b){return b.checked===a.element.is(":checked")}},formValidators:{radio:function(b,c){var d=c.inflictedFields[0];return a('[name="'+d+'"]:checked').length>0}},sanitizers:{uppercase:function(a){return a.toUpperCase()},capitalize:function(a){return a.replace(/(?:^|\s)\S/g,function(a){return a.toUpperCase()})},regexp:function(a,b){var c=new RegExp(b.regexp,b.regexpmod);return a.replace(c,b.replace)},iban:function(a){if(a=a.replace(/\s/g,""),!/[A-Z]{2}[0-9]{2}[A-Z]{4}/.test(a))return a;var b=a.match(/.{1,4}/g);return null===b?"":b.join(" ")}},registerCallback:function(a,b,c){return this.i.callbacks.push({slug:a,on:b,fn:c}),this},retrieveCallback:function(a,b){return _.findWhere(this.i.callbacks,{slug:a,on:b})},performCallback:function(a,b,c,d,e){var f=this.retrieveCallback(a,b);void 0!==f&&f.fn(c,d,e)},ajaxSubmitForm:function(b){a.ajax({url:"/ajax/"+b.ajaxMethod+"/",data:b.getValues(),dataType:"json",type:"POST",success:function(a){g.performCallback(b.ajaxMethod,g.AJAXCALLBACK,b,a,{type:g.AJAXCALLBACK,instant:!1})},error:function(){console&&console.log("Fieldwork Ajax encountered an error")}})}};a(c).trigger("fieldwork-loaded",g),a.extend(d.prototype,{sanitize:function(){for(var a in this.fields)this.fields[a].sanitize&&this.fields[a].sanitize(!1)},validate:function(){var a=!0;for(var b in this.fields)this.fields[b].validate&&!this.fields[b].validate()&&(a=!1);if(a)for(var b in this.validators)if(!this.validators[b].validate())break},isValid:function(){for(var a in this.fields)if(!this.fields[a].isValid())return!1;for(var a in this.validators)if(!this.validators[a].isValid())return!1;return!0},submit:function(a){if(this.sanitize(),this.validate(),this.isValid()){if(""!==this.submitCallback){var c=b[this.submitCallback];"function"==typeof c&&c(a,this)}}else{a.preventDefault();for(var d in this.fields)this.fields[d].cancelSubmit&&this.fields[d].cancelSubmit();for(d in this.fields)if(this.fields[d].isValid&&!this.fields[d].isValid()){this.fields[d].element.focus().jtShow();break}}g.performCallback(this.slug,g.SUBMITCALLBACK,this,null,a),this.ajaxEnabled&&(a.preventDefault(),g.ajaxSubmitForm(this))},getValues:function(){var a={};a[this.hiddenFieldName]="yes";for(var b in this.fields)this.fields[b].hasValue()&&(a[this.fields[b].getName()]=this.fields[b].getValue());return a},getFieldByName:function(a){for(var b in this.fields)if(this.fields[b].getName()===a)return this.fields[b];return!1}}),a.extend(e.prototype,{validate:function(){return this.valid=!0,g.formValidators[this.method]&&(g.formValidators[this.method](this.form,this)||(sweetAlert(this.error,"","error"),this.valid=!1)),this.valid},isValid:function(){return this.valid}}),a.extend(f.prototype,{blur:function(){this.touched&&(this.sanitize(!1),this.validate())},keyup:function(){},cancelSubmit:function(){this.clicked=!1},validate:function(){var a=this.getValue(),b=!0;for(var c in this.validators)if(g.validators[this.validators[c].method]&&(this.element.attr("placeholder")===a&&(a=""),!g.validators[this.validators[c].method](this,this.validators[c]))){this.setInvalid(this.validators[c].error),b=!1;break}return b&&this.setValid(),b},sanitize:function(a){var b=this.getValue(),c=b;for(var d in this.sanitizers)g.sanitizers[this.sanitizers[d].method]&&(!a||this.sanitizers[d].realtime)&&(b=g.sanitizers[this.sanitizers[d].method](b,this.sanitizers[d]));c!==b&&this.setValue(b)},getName:function(){return this.element.attr("name")},hasValue:function(){return!this.isButton||this.clicked},getValue:function(){return this.element.val()==this.element.attr("placeholder")?"":this.element.val()},setValue:function(a){this.element.val(a)},setInvalid:function(a){this.element.removeClass("valid").addClass("invalid"),this.element.jtLink(a,["focus"],[]),this.valid=!1},setValid:function(){this.element.removeClass("invalid"),this.validators.length&&this.element.addClass("valid"),this.element.jtUnlink(),this.valid=!0},isValid:function(){return this.valid}}),a.fn.fieldwork=function(b){new d(a(this),b)},g.processForms=function(){a(".invisible-target-button:not(.processed)").each(function(){var b=a(this);b.addClass("processed"),a("#target-"+b.attr("id")).on({click:function(){b.click()}})})},a(function(){a("[data-input-mask]").each(function(){var b=a(this);b.mask(b.data("input-mask"))}),g.processForms()})}(jQuery,window,document);
//# sourceMappingURL=fieldwork.min.js.map